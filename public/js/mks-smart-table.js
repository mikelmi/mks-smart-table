!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=9)}({0:function(e,t){!function(){var e=angular.module("mks-smart-table",["smart-table"]);e.run(["$templateCache",function(e){e.put("template/smart-table/pagination.html",'<nav ng-if="numPages && pages.length >= 2" aria-label="Page navigation"><ul class="pagination"><li class="page-item"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(1)"><span>&laquo;</span></a></li><li class="page-item" ng-repeat="page in pages" ng-class="{active: page==currentPage}"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(page)">{{page}}</a></li><li class="page-item"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(numPages)"><span>&raquo;</span></a></li></ul></nav>')}]),e.controller("TableCtrl",["$http","$q","$scope","$filter","$httpParamSerializerJQLike",function(e,t,n,i,a){function o(n,i,o,c){l&&l.resolve("cancel"),l=t.defer();var s={start:i,number:o};c.sort&&(s.sort=c.sort),c.search&&c.search.predicateObject&&(s.search=c.search.predicateObject);var r={method:"GET",url:n+"?"+a(s),headers:{"X-Requested-With":"XMLHttpRequest"},timeout:l.promise};return e(r)}function c(e){var t=r.rows.indexOf(e);t!==-1&&(r.rows.splice(t,1),r.total>0&&r.total--,e.isSelected&&r.hasSelected>0&&r.hasSelected--)}function s(e){return e.map(function(e){return e[r.idKey]})}this.rows=[],this.url=null,this.start=0,this.end=0,this.total=0,this.hasSelected=0,this.idKey="id";var r=this,l=null;this.init=function(e,t){this.url=e,t&&(this.idKey=t)},this.pipeServer=function(e){if(r.url){r.isLoading=!0;var t=e.pagination,n=t.start||0,i=t.number||10;o(r.url,n,i,e).then(function(t){var n=t.data,i=0;r.rows=n.data,e.pagination.numberOfPages=n.pages,i=e.pagination.start,r.end=i+r.rows.length,r.rows.length>0&&i++,r.start=i,r.total=n.total,r.hasSelected=0,r.isLoading=!1},function(){r.isLoading=!1})}},this.removeRow=function(t,n,i){return!(i&&!confirm(i))&&(n?(t.isLoading=!0,e.post(n).then(function(){t.isLoading=!1,c(t)},function(){t.isLoading=!1}),!1):(c(t),!1))},this.getSelected=function(){return i("filter")(this.rows,{isSelected:!0})},this.removeSelected=function(t,n){if(n&&!confirm(n))return!1;var i=this.getSelected();return!!i.length&&(t?(r.isLoading=!0,void e.post(t,{id:s(i)}).then(function(){angular.forEach(i,function(e){c(e)}),r.isLoading=!1},function(){r.isLoading=!1})):(angular.forEach(i,function(e){c(e)}),!1))},n.$on("row-selected",function(e,t){t?r.hasSelected++:r.hasSelected>0&&r.hasSelected--}),this.updateRow=function(t,n,i){return!(i&&!confirm(i))&&(t.isLoading=!0,e.post(n).then(function(e){t.isLoading=!1;var n=e.data;n&&n.model&&angular.extend(t,n.model)},function(){t.isLoading=!1}),!1)},this.updateSelected=function(t,n){if(n&&!confirm(n))return!1;var i=this.getSelected();return!!i.length&&(r.isLoading=!0,void e.post(t,{id:s(i)}).then(function(e){var t=e.data;t&&t.models&&angular.forEach(i,function(e){"undefined"!=typeof t.models[e[r.idKey]]&&angular.extend(e,t.models[e[r.idKey]])}),r.isLoading=!1},function(){r.isLoading=!1}))}}]),e.directive("mstWatchQuery",[function(){return{restrict:"A",require:"^stTable",scope:{mstWatchQuery:"="},link:function(e,t,n,i){e.$watch("mstWatchQuery",function(e){i.search(e)})}}}]),e.directive("mstSelectRow",[function(){return{restrict:"EA",template:'<label class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input st-chk" ng-model="row.isSelected" /><span class="custom-control-indicator"></span></label>',scope:{row:"=mstSelectRow"},link:function(e,t){return!e.row.non_selectable&&(t.on("update",function(t){t.preventDefault(),e.$apply(function(){e.row.isSelected=!e.row.isSelected})}),void e.$watch("row.isSelected",function(n,i){t.parent().toggleClass("table-active st-selected",1==n),e.$emit("row-selected",n)}))}}}]),e.directive("mstSelectAllRows",[function(){return{restrict:"EA",template:'<label class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input st-chk" ng-model="isAllSelected" /><span class="custom-control-indicator"></span></label>',scope:{all:"=mstSelectAllRows"},link:function(e){e.$watch("isAllSelected",function(){e.all&&e.all.forEach(function(t){t.non_selectable||(t.isSelected=e.isAllSelected||!1)})}),e.$watch("all",function(t,n){e.isAllSelected=!1})}}}])}(window.angular)},9:function(e,t,n){e.exports=n(0)}});