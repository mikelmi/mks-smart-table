!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=9)}({0:function(e,t){!function(){var e=angular.module("mks-smart-table",["smart-table"]);e.run(["$templateCache",function(e){e.put("template/smart-table/pagination.html",'<nav ng-if="numPages && pages.length >= 2" aria-label="Page navigation"><ul class="pagination"><li class="page-item"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(1)"><span>&laquo;</span></a></li><li class="page-item" ng-repeat="page in pages" ng-class="{active: page==currentPage}"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(page)">{{page}}</a></li><li class="page-item"><a class="page-link" href="javascript: void(0);" ng-click="selectPage(numPages)"><span>&raquo;</span></a></li></ul></nav>')}]),e.controller("TableCtrl",["$http","$q","$scope","$filter","$httpParamSerializerJQLike",function(e,t,n,i,a){function r(n,i,r,o){l&&l.resolve("cancel"),l=t.defer();var c={start:i,number:r};o.sort&&(c.sort=o.sort),o.search&&o.search.predicateObject&&(c.search=o.search.predicateObject);var s={method:"GET",url:n+"?"+a(c),headers:{"X-Requested-With":"XMLHttpRequest"},timeout:l.promise};return e(s)}function o(e){var t=s.rows.indexOf(e);t!==-1&&(s.rows.splice(t,1),s.total>0&&s.total--,e.isSelected&&s.hasSelected>0&&s.hasSelected--)}function c(e){return e.map(function(e){return e[s.idKey]})}this.rows=[],this.url=null,this.start=0,this.end=0,this.total=0,this.hasSelected=0,this.idKey="id";var s=this,l=null;this.init=function(e,t){this.url=e,t&&(this.idKey=t)},this.pipeServer=function(e){if(s.url){s.isLoading=!0;var t=e.pagination,n=t.start||0,i=t.number||10;r(s.url,n,i,e).then(function(t){var n=t.data,i=0;s.rows=n.data,e.pagination.numberOfPages=n.pages,i=e.pagination.start,s.end=i+s.rows.length,s.rows.length>0&&i++,s.start=i,s.total=n.total,s.hasSelected=0,s.isLoading=!1},function(){s.isLoading=!1})}},this.removeRow=function(t,n,i){return!(i&&!confirm(i))&&(n?(t.isLoading=!0,e.post(n).then(function(){t.isLoading=!1,o(t)},function(){t.isLoading=!1}),!1):(o(t),!1))},this.getSelected=function(){return i("filter")(this.rows,{isSelected:!0})},this.removeSelected=function(t,n){if(n&&!confirm(n))return!1;var i=this.getSelected();return!!i.length&&(t?(s.isLoading=!0,void e.post(t,{id:c(i)}).then(function(){angular.forEach(i,function(e){o(e)}),s.isLoading=!1},function(){s.isLoading=!1})):(angular.forEach(i,function(e){o(e)}),!1))},n.$on("row-selected",function(e,t){t?s.hasSelected++:s.hasSelected>0&&s.hasSelected--}),this.updateRow=function(t,n,i){return!(i&&!confirm(i))&&(t.isLoading=!0,e.post(n).then(function(e){t.isLoading=!1;var n=e.data;n&&n.model&&angular.extend(t,n.model)},function(){t.isLoading=!1}),!1)},this.updateSelected=function(t,n){if(n&&!confirm(n))return!1;var i=this.getSelected();return!!i.length&&(s.isLoading=!0,void e.post(t,{id:c(i)}).then(function(e){var t=e.data;t&&t.models&&angular.forEach(i,function(e){"undefined"!=typeof t.models[e[s.idKey]]&&angular.extend(e,t.models[e[s.idKey]])}),s.isLoading=!1},function(){s.isLoading=!1}))}}]),e.directive("mstWatchQuery",[function(){return{restrict:"A",require:"^stTable",scope:{mstWatchQuery:"="},link:function(e,t,n,i){e.$watch("mstWatchQuery",function(e){i.search(e)})}}}]),e.directive("mstSelectRow",[function(){return{restrict:"EA",template:'<input type="checkbox" class="st-chk" ng-model="row.isSelected" />',scope:{row:"=mstSelectRow"},link:function(e,t){return!e.row.non_selectable&&(t.on("update",function(t){t.preventDefault(),e.$apply(function(){e.row.isSelected=!e.row.isSelected})}),void e.$watch("row.isSelected",function(n,i){t.parent().toggleClass("st-selected active",1==n),e.$emit("row-selected",n)}))}}}]),e.directive("mstSelectAllRows",[function(){return{restrict:"EA",template:'<input type="checkbox" class="st-chk" />',scope:{all:"=mstSelectAllRows"},link:function(e,t){t.on("change.clicked",function(t){t.preventDefault(),e.$apply(function(){e.isAllSelected=!e.isAllSelected||!1})}),e.$watch("isAllSelected",function(){e.all&&e.all.forEach(function(t){t.non_selectable||(t.isSelected=e.isAllSelected||!1)})}),e.$watch("all",function(t,n){e.isAllSelected=!1})}}}])}(window.angular)},9:function(e,t,n){e.exports=n(0)}});